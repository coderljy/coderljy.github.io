<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📖&lt;/text&gt;&lt;/svg&gt;">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>区块链&nbsp;|&nbsp;夕的博客</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="区块链">
  
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📖&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😀&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>About</span>
        </div>
      </a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
    <h1 class="Header__Title">区块链</h1>
    
  </header>
  <article id="https://www.notion.so/c58bd51b52744576a9e197ff4dc59cae" class="PageRoot"><h2 id="https://www.notion.so/b2b5df87012c45348789f7031b69c848" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/b2b5df87012c45348789f7031b69c848"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">区块链共识算法</span></span></h2><div id="https://www.notion.so/682f515cc0714403919f792a25747b17" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">POW：Proof of Work，工作证明。
比特币在Block的生成过程中使用了POW机制，一个符合要求的Block Hash由N个前导零构成，零的个数取决于网络的难度值。要得到合理的Block Hash需要经过大量尝试计算，计算时间取决于机器的哈希运算速度。当某个节点提供出一个合理的Block Hash值，说明该节点确实经过了大量的尝试计算，当然，并不能得出计算次数的绝对值，因为寻找合理hash是一个概率事件。当节点拥有占全网n%的算力时，该节点即有n/100的概率找到Block Hash。</span></span></p></div><div id="https://www.notion.so/bf8fbe79ee5444d58b28ddc7ba69a008" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">POS：Proof of Stake，股权证明。
POS：也称股权证明，类似于财产储存在银行，这种模式会根据你持有数字货币的量和时间，分配给你相应的利息。
简单来说，就是一个根据你持有货币的量和时间，给你发利息的一个制度，在股权证明POS模式下，有一个名词叫币龄，每个币每天产生1币龄，比如你持有100个币，总共持有了30天，那么，此时你的币龄就为3000，这个时候，如果你发现了一个POS区块，你的币龄就会被清空为0。你每被清空365币龄，你将会从区块中获得0.05个币的利息(假定利息可理解为年利率5%)，那么在这个案例中，利息 = 3000 * 5% / 365 = 0.41个币，这下就很有意思了，持币有利息。</span></span></p></div><div id="https://www.notion.so/a2d50a2f001e4616aa38eef8ee5456c8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">DPOS：Delegated Proof of Stake，委任权益证明
比特股的DPoS机制，中文名叫做股份授权证明机制（又称受托人机制），它的原理是让每一个持有比特股的人进行投票，由此产生101位代表 , 我们可以将其理解为101个超级节点或者矿池，而这101个超级节点彼此的权利是完全相等的。从某种角度来看，DPOS有点像是议会制度或人民代表大会制度。如果代表不能履行他们的职责（当轮到他们时，没能生成区块），他们会被除名，网络会选出新的超级节点来取代他们。DPOS的出现最主要还是因为矿机的产生，大量的算力在不了解也不关心比特币的人身上，类似演唱会的黄牛，大量囤票而丝毫不关心演唱会的内容。</span></span></p></div><h3 id="https://www.notion.so/b8fc3a1e41df407481f19d40a778510e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/b8fc3a1e41df407481f19d40a778510e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">gossip</span></span></h3><div id="https://www.notion.so/7ac6fc597c064d9cb12b48e3c6c51c87" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">一种网络数据同步协议--gossip，它的主要作用是致力于账本数据的安全传输，保证不同节点之间状态的同步和完整。</span></span></p></div><div id="https://www.notion.so/1cd0ed0a6d134956be2cd81daddf3bab" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在fabric的网络中gossip的message是持续存在的，一个peer节点会不断、实时的接收到来自同一channel其他peers的账本数据。每一个gossip message都携带发送方的签名信息，这可以使得接受方轻易的辨别对方的身份和校验消息的完整性和合法性。当一个peer由于延迟、网络故障等原因而错过block数据的情况发生时，可以通过从其他拥有该block的peer处去同步，从而保证了账本的完整性和一致性。</span></span></p></div><div id="https://www.notion.so/dc7692dcd7ed4313949dc2ca7c9a8fb8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">gossip 协议的三个主要功能：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/c39a40022f2b48f683eb9977671df5af" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">peer发现和channel membership管理： 通过持续的去辨别同channel内其他peer的身份是否合法 和 校验peer是否宕机，来维持和管理channel内其他peers的信息</span></span></li><li id="https://www.notion.so/d27bbec3bfb74b858c57eaa0e8d46b81" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">账本数据的传播： 同channel内任何一个peer在发现block数据缺失时，可以从其他peer拷贝正确的block数据</span></span></li><li id="https://www.notion.so/3a801132c47f4836824c3b524d15c0e0" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">传输加速： 通过点对点的传输方式去更新账本，可以使得新上线的peer快速同步数据</span></span></li></ul><div id="https://www.notion.so/bcecd76183204bf9979dbfb5c100e25d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">gossip协议主要是一个P2P的网络传输协议。fabric主要通过此协议来进行区块的同步。</span></span></p></div><div id="https://www.notion.so/f90a2487d97f4131bfc63cdb5db04b2e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在gossip协议中 一个peer同时从多个peer接收数据，然后会从同channel中其他的peers选择出来一定数量N的peer，去将数据发送到这些被选中的peer中，N是一个可配置的常量。peer 也可以去主动拉去数据而不是被动的等待，整个过程不断的重复，直到ledger状态和channel的membership达到同步的状态。当一个channel的新块产生后每一个组织的leader会去从orderer节点去拉取该块，然后通过gossip协议去广播。</span></span></p></div><h3 id="https://www.notion.so/af49ea18c8ff4dc189e6692c067908b6" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/af49ea18c8ff4dc189e6692c067908b6"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">51%算力</span></span></h3><div id="https://www.notion.so/b6fa07b6a1f84d91b4f2e617ea90565a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">比特币白皮书中，有过这样的表述：</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">诚实节点控制算力的总和，大于有合作关系的攻击者算力的总和，该系统就是安全的。</strong></span></span></p></div><div id="https://www.notion.so/9e4eeccd51924d2d8c93b6d7e1af42de" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">换句说，当系统中有合作关系的恶意节点所控制的算力，超过诚实节点所控制的算力，系统就是有被攻击的风险。这种由恶意节点控制超过50%算力所发起的攻击，称为51%算力攻击（51% Attack）。</span></span></p></div><div id="https://www.notion.so/9dde1fa1daa141ca947ae0055b6ff307" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">那是不是所有的加密货币系统都有可能遭遇51%算力攻击的风险呢？其实并不是的，只有基于PoW（工作量证明）共识机制的加密货币，才存在51%算力攻击，比如比特币、比特现金和目前阶段的以太坊等；而非PoW共识算法的加密货币则不存在51%算力攻击，如基于DPoS（委托权益证明）共识机制的EOS、TRON等。</span></span></p></div><div id="https://www.notion.so/e32f3ecada1f45eda00b1233a19a22c6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在了解了51%算力攻击之后，你肯定好奇，这种攻击能做哪些坏事。</span></span></p></div><div id="https://www.notion.so/d554059f0ab047b6a310358193e7ff9e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">1、双花（Double Spending）。双花的意思是一份&quot;钱&quot;花了两次甚至多次。</span></span></p></div><div id="https://www.notion.so/6ac8db2836b04a4e96c54a17c6dd0220" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">51%算力攻击是如何做到双花的呢？假设小黑有666BTC，他把这些币支付的大白同时，也把这些币发到自己的另一钱包地址上。换一句话说，小黑的一份钱，同时转给两个人。最终，发给大白那笔交易先被得到了确认，并打包在区块高度为N的区块内。</span></span></p></div><div id="https://www.notion.so/2c85b58aff8f4ed3b1c7f0f4510cbed7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">这时，控制了超过50%算力的小黑，发起51%算力攻击。他通过重新组装第N个区块，将发给自己那笔交易打包进区块里，并持续在这条链上延展区块，由于算力的优势，这条量将成为最长合法链。这样小黑666BTC双花成功，大白钱包里的666BTC&quot;不翼而飞&quot;了。</span></span></p></div><h3 id="https://www.notion.so/0d3c52facf6541f796138a2756cb17dc" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/0d3c52facf6541f796138a2756cb17dc"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">闪电网络</span></span></h3><h3 id="https://www.notion.so/f76b65b94d964c8db82e5fa692e2151a" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/f76b65b94d964c8db82e5fa692e2151a"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">IPFS</span></span></h3><div id="https://www.notion.so/629827deb67d42f38a26eaef7f3448a2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">1、IPFS到底是什么？</span></span></p></div><div id="https://www.notion.so/cd9405624bca423eb0e416fe6667dca0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">IPFS，其实是一种点对点的分布式文件系统。</span></span></p></div><div id="https://www.notion.so/81dcef67f0a545e892b74a044e6e4d2d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">（1）IPFS是一个运用git分布式、去中心化存储且单一的bittorrent群集。</span></span></p></div><div id="https://www.notion.so/854b43957f1c4053a6668e9880793e64" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">（2）IPFS是依据内容从而来产生地址，它提供了高吞吐量的内容寻址存储模型。</span></span></p></div><div id="https://www.notion.so/b71d20096d4041bb9e3c7c5900e9c4fe" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">（3）IPFS主要是通过默克尔树数据结构来构建版本文件系统。</span></span></p></div><div id="https://www.notion.so/47fd12270ce9433b8564c57d736befb5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">（4）IPFS不存在单独的故障点，节点之间也是不需要相互信任。</span></span></p></div><div id="https://www.notion.so/2c955088a33f4b71b3610386c7d48819" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">星际文件系统IPFS（InterPlanetary File System），它其实是一个面向全球、点对点的分布式版本文件系统，能将所有具有相同文件系统的计算设备连接在一起，主要目标是对我们目前统领互联网的超文本传输协议（也就是HTTP）进行补充（更甚者是“取代”）。它的原理就是利用基于内容的地址来替代基于域名的地址，简单来说，用户寻找的是存储在某地方的内容，而不是某地址，就只需确认验证内容的哈希，这样就能过获得速度更快、安全、健壮、持久的网页。</span></span></p></div></article>
  <footer class="Footer">
  <div>&copy; 夕的博客 2022</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>